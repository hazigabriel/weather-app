(()=>{"use strict";let e=function(){return"Celsius"==document.querySelector(".active").textContent?"metric":"imperial"};function t(e){return e>337.5||e<11?"N":e>292.5?"NW":e>247.5?"W":e>202.5?"SW":e>157.5?"S":e>122.5?"SE":e>67.5?"E":e>=11?"NE":void 0}const n=function(n,o,c,r,i,a,u,d,l){document.querySelector(".cityName").textContent=`${n}, ${o}`,document.querySelector(".temperature").textContent=Math.round(c)+"째",document.querySelector(".currentForecast").textContent=`${r}(${i})`,document.querySelector(".temperatureFelt").textContent=Math.round(a)+"째",document.querySelector(".humidity").textContent=u+"%\t ",document.querySelector(".wind").textContent=(e(),"metric"==e()?`${Math.round(3.6*d)} km/h ${t(l)}`:`${Math.round(d)} mph ${t(l)}`)},o=function(e){let t=document.querySelectorAll(".day"),n=document.querySelectorAll(".weeklyHighTemp"),o=document.querySelectorAll(".weeklyLowTemp"),c=document.querySelectorAll(".weeklyForecast"),r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(let i=0;i<t.length;i++)t[i].textContent=r[new Date(1e3*e[i].dt).getDay()],n[i].textContent=`${Math.round(e[i].temp.max)}째`,o[i].textContent=`${Math.round(e[i].temp.min)}째`,c[i].textContent=e[i].weather[0].description};document.querySelector(".getGeolocation").addEventListener("click",(function(){}));const c=function(e,t){fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${t}`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n(e.name,e.sys.country,e.main.temp,e.weather[0].main,e.weather[0].description,e.main.feels_like,e.main.humidity,e.wind.speed,e.wind.deg),fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e.coord.lat}&lon=${e.coord.lon}&exclude=minutely,hourly&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${t}`,{mode:"cors"}).then((function(e){return e.json()})).then((function(t){console.log(e),n(e.name,e.sys.country,e.main.temp,e.weather[0].main,e.weather[0].description,e.main.feels_like,e.main.humidity,e.wind.speed,e.wind.deg),o(t.daily)}))}))},r=function(e,t,c){fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=minutely,hourly&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${c}`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){console.log(e),fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${c}`,{mode:"cors"}).then((function(e){return e.json()})).then((function(t){console.log(e.current.wind_speed),n(e.timezone.split("/").pop(),t.sys.country,e.current.temp,e.current.weather[0].main,e.current.weather[0].description,e.current.feels_like,e.current.humidity,e.current.wind_speed,e.current.wind_deg),o(e.daily)}))}))};let i="Metric",a=["Bucharest"];(function(){let e=document.querySelector(".cityNameInput");document.querySelector(".getCityName").addEventListener("click",(function(){""!=e.value&&(c(e.value,i),a=[e.value],e.value="")}))})(),document.querySelector(".getGeolocation").addEventListener("click",(function(){navigator.geolocation.getCurrentPosition((function(e){let t=e.coords.latitude,n=e.coords.longitude;a=[t,n],r(t,n,i)}))})),function(){let e=document.querySelectorAll(".system");document.querySelector(".switch").addEventListener("click",(function(t){t.target.classList.contains("system")&&(e[0].classList="system",e[1].classList="system",t.target.classList="system active",i="Celsius"==t.target.textContent?"metric":"imperial",a.length<2?c(a,i):r(a[0],a[1],i))}))}(),c("Bucharest",i),window.fetchWeather=c})();