(()=>{"use strict";let e=function(){return"Celsius"==document.querySelector(".active").textContent?"metric":"imperial"};const t=function(t,n,o,r,c,a,i,u,d){function l(e){return e>337.5||e<11?"N":e>292.5?"NW":e>247.5?"W":e>202.5?"SW":e>157.5?"S":e>122.5?"SE":e>67.5?"E":e>=11?"NE":void 0}document.querySelector(".cityName").textContent=`${t}, ${n}`,document.querySelector(".temperature").textContent=Math.round(o)+"째",document.querySelector(".currentForecast").textContent=`${r}(${c})`,document.querySelector(".temperatureFelt").textContent=Math.round(a)+"째",document.querySelector(".humidity").textContent=i+"%\t ",document.querySelector(".wind").textContent=(e(),"metric"==e()?`${Math.round(3.6*u)} km/h ${l(d)}`:`${Math.round(u)} mph ${l(d)}`)},n=function(e){let t=document.querySelectorAll(".day"),n=document.querySelectorAll(".weeklyHighTemp"),o=document.querySelectorAll(".weeklyLowTemp"),r=document.querySelectorAll(".weeklyForecast"),c=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(let a=0;a<t.length;a++)t[a].textContent=c[new Date(1e3*e[a].dt).getDay()],n[a].textContent=`${Math.round(e[a].temp.max)}째`,o[a].textContent=`${Math.round(e[a].temp.min)}째`,r[a].textContent=e[a].weather[0].description},o=function(e,o){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${o}`).then((function(e){return e.json()})).then((function(e){t(e.name,e.sys.country,e.main.temp,e.weather[0].main,e.weather[0].description,e.main.feels_like,e.main.humidity,e.wind.speed,e.wind.deg),fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e.coord.lat}&lon=${e.coord.lon}&exclude=minutely,hourly&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${o}`).then((function(e){return e.json()})).then((function(o){t(e.name,e.sys.country,e.main.temp,e.weather[0].main,e.weather[0].description,e.main.feels_like,e.main.humidity,e.wind.speed,e.wind.deg),n(o.daily)}))}))},r=function(e,o,r){fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${o}&exclude=minutely,hourly&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${r}`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&appid=dd56feccf641467a3fb598d6e6f9ac6f&units=${r}`,{mode:"cors"}).then((function(e){return e.json()})).then((function(o){t(e.timezone.split("/").pop(),o.sys.country,e.current.temp,e.current.weather[0].main,e.current.weather[0].description,e.current.feels_like,e.current.humidity,e.current.wind_speed,e.current.wind_deg),n(e.daily)}))}))};let c="Metric",a=["Bucharest"];(function(){let e=document.querySelector(".cityNameInput");document.querySelector(".getCityName").addEventListener("click",(function(){""!=e.value&&(o(e.value,c),a=[e.value],e.value="")}))})(),document.querySelector(".getGeolocation").addEventListener("click",(function(){navigator.geolocation.getCurrentPosition((function(e){let t=e.coords.latitude,n=e.coords.longitude;a=[t,n],r(t,n,c)}))})),function(){let e=document.querySelectorAll(".system");document.querySelector(".switch").addEventListener("click",(function(t){t.target.classList.contains("system")&&(e[0].classList="system",e[1].classList="system",t.target.classList="system active",c="Celsius"==t.target.textContent?"metric":"imperial",a.length<2?o(a,c):r(a[0],a[1],c))}))}(),o("Bucharest",c),window.fetchWeather=o})();